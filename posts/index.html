<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>Posts | Narukine troubleshoot log</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=stylesheet href=/css/bundle.css><link rel=icon href=/icons/16.png sizes=16x16 type=image/png><link rel=icon href=/icons/32.png sizes=32x32 type=image/png><link rel=alternate type=application/rss+xml href=/posts/index.xml title="Narukine troubleshoot log"></head><body class="body kind-section"><header class=header><a class=logo href=/>Narukine troubleshoot log</a></header><div class=primary><main class=main><div class="page block"><h1 class=page__title>Posts</h1></div><div class=cards><div class="card card--2col"><article class="entry card__box block"><h1 class="entry__title title-excerpt"><a class=entry__title-link href=/posts/setsockopt/>setsockopt 함수 사용 시 주의점</a></h1><div class=entry__content>해당 장비에 이더넷이 활성화 되어있는지 확인하기 위하여 해당 장비가 보내는 신호를 주기별로 받을 필요가 생겨서 소켓 옵션으로 SO_RCVTIMEO를 주어 일정 시간이 넘을 경우 비활성화 처리해야 하는 경우가 생겼다. 당연히 timeout이니 timeval_t가 옵션 인자로 들어갈 줄 알고 timeval_t 구조체를 사용하여 인자를 주었는데, 동작하지 않는 것이었다. 사용했던 코드는 아래와 같다.
timeval_t tv = {5, 0}; setsockopt(soc, SOL_SOCKET, SO_RCVTIMEO, reinterpret_cast&lt;char*>(&tv), sizeof(tv)); 그러나 찾아보니 윈도우에서는 인자가 timeval_t가 아닌 DWORD로 ms단위로 지정하여 보내줘야 했던 것이었다.</div></article></div></div></main></div><footer class=footer><div class=footer__copyright>© 2022 Narukine troubleshoot log. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer></body></html>